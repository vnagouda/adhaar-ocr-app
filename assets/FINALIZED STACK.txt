FINALIZED STACK
ğŸ§  n8n: Main automation engine

ğŸ“² WhatsApp (Twilio / Gupshup): Communication

ğŸ” OCR: Aadhaar data extraction (Tesseract / Google Vision API)

ğŸ’° Razorpay: Payment collection

ğŸ“š Zoho CRM: Data storage & policy tracking

ğŸ§¾ Zoho Books: Accounting sync (future)

ğŸ“¤ Email / Drive / Sompo API: Export to insurance

AUTOMATION PLAN USING n8n
ğŸš€ PHASE 1 â€“ MVP LAUNCH (Aadhaar â†’ CRM + Payment)
Goal: From Aadhaar image â†’ Extract â†’ Minimal info â†’ CRM Lead â†’ Send payment link

âœ… Work Items:
Webhook Trigger Node

Receives image via WhatsApp or form upload

OCR Node (Tesseract / Google Vision API)

Extract Name, DOB, Gender, Aadhaar Number

Function Node: Validate & Clean Data

Format DOB, ensure UID is 12 digits, fix common OCR errors

Decision Node

If required fields found â†’ continue

Else â†’ send WhatsApp follow-up asking for nominee name/family type

Razorpay API Node

Create payment link for membership

Save status (Pending)

WhatsApp Node (via Twilio / Gupshup)

Send summary + payment link + request for confirmation

Zoho CRM API Node

Create contact / lead with extracted + confirmed data

âš™ï¸ PHASE 2 â€“ Membership â†’ Policy Plan Assignment
Goal: Automatically assign policy based on eligibility and generate invoice

âœ… Work Items:
Cron Trigger Node

Run daily to scan Zoho CRM for 75+ day old members with no policy

Zoho CRM API Node

Fetch contacts by filter

Function Node

Decide plan type: (1 Adult, 2 Adults, etc.) based on stored data

Zoho Subscriptions/Billing API Node

Assign policy plan

Generate invoice (with premium + share capital + commission)

WhatsApp Node

Send invoice + payment link via WhatsApp

Razorpay Webhook Trigger

Listen for premium payment success

Update CRM with status

ğŸ›¡ï¸ PHASE 3 â€“ Export to Insurer + Policy Issuance
Goal: Automate export to Universal Sompo & update issuance status

âœ… Work Items:
Cron Trigger Node

Daily check: has paid, 85+ days, not exported

Zoho CRM API Node

Fetch eligible users

Function Node

Format as per Sompoâ€™s required Excel schema

Google Drive/Email Node

Save/export the file OR auto-email to Sompo team

Manual Upload Trigger (Optional)

Upload insurer's response (CSV with status)

Parse CSV + Update CRM Node

Set Policy Status, Issue Date in Zoho CRM

ğŸ“š PHASE 4 â€“ Zoho Books Integration (Optional)
Goal: Reconcile payments, commissions, share capital into accounting

âœ… Work Items:
Razorpay â†’ Zoho Books API Node

For each payment, create corresponding journal entries

Zoho CRM â†’ Zoho Books Sync

Match members, map commissions

Dashboard Webhook (Optional)

Admin panel to view accounting logs